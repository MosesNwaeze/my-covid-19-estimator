<html>
  <head>
    <title>Test</title>
    <script>
      const impact = (data) => {
        const availableHospitalBeds = data.totalHospitalBeds * (35 / 100);
        const percentageDailyPopulationIncome =
          data.region.avgDailyIncomePopulation;

        const durationInDays = () => {
          switch (data.periodType) {
            case 'days': {
              return 2 ** Math.floor(data.timeToElapse / 3);
            }
            case 'weeks': {
              const days = data.timeToElapse * 7;
              return 2 ** Math.floor(days / 3);
            }
            case 'months': {
              const days = data.timeToElapse * 30;
              return 2 ** Math.floor(days / 3);
            }
            default: {
              return 0;
            }
          }
        };
        const currentlyInfected = data.reportedCases * 10;
        const infectionsByRequestedTime = currentlyInfected * durationInDays();
        const severeCasesByRequestedTime =
          infectionsByRequestedTime * (15 / 100);
        const hospitalBedsByRequestedTime =
          availableHospitalBeds - severeCasesByRequestedTime;
        const casesForICUByRequestedTime =
          infectionsByRequestedTime * (5 / 100);
        const casesForVentilatorsByRequestedTime =
          infectionsByRequestedTime * (2 / 100);
        const dollarsInFlight =
          percentageDailyPopulationIncome *
          infectionsByRequestedTime *
          data.region.avgDailyIncomeInUSD *
          30;
        return {
          currentlyInfected,
          infectionsByRequestedTime,
          severeCasesByRequestedTime,
          hospitalBedsByRequestedTime,
          casesForICUByRequestedTime,
          casesForVentilatorsByRequestedTime,
          dollarsInFlight
        };
      };

      const severeImpact = (data) => {
        const availableHospitalBeds = data.totalHospitalBeds * (35 / 100);
        const percentageDailyPopulationIncome =
          data.region.avgDailyIncomePopulation;

        const durationInDays = () => {
          switch (data.periodType) {
            case 'days': {
              return 2 ** Math.floor(data.timeToElapse / 3);
            }
            case 'weeks': {
              const days = data.timeToElapse * 7;
              return 2 ** Math.floor(days / 3);
            }
            case 'months': {
              const days = data.timeToElapse * 30;
              return 2 ** Math.floor(days / 3);
            }
            default: {
              return 0;
            }
          }
        };

        const currentlyInfected = data.reportedCases * 50;
        const infectionsByRequestedTime = currentlyInfected * durationInDays();
        const severeCasesByRequestedTime =
          infectionsByRequestedTime * (15 / 100);
        const hospitalBedsByRequestedTime =
          availableHospitalBeds - severeCasesByRequestedTime;
        const casesForICUByRequestedTime =
          infectionsByRequestedTime * (5 / 100);
        const casesForVentilatorsByRequestedTime =
          infectionsByRequestedTime * (2 / 100);
        const dollarsInFlight =
          percentageDailyPopulationIncome *
          infectionsByRequestedTime *
          data.region.avgDailyIncomeInUSD *
          30;
        return {
          currentlyInfected,
          infectionsByRequestedTime,
          severeCasesByRequestedTime,
          hospitalBedsByRequestedTime,
          casesForICUByRequestedTime,
          casesForVentilatorsByRequestedTime,
          dollarsInFlight
        };
      };

      const covid19ImpactEstimator = (data) => ({
        impact: impact(data),
        severeImpact: severeImpact(data)
      });

      const data = {
        region: {
          name: 'Africa',
          avgAge: 19.7,
          avgDailyIncomeInUSD: 5,
          avgDailyIncomePopulation: 0.71
        },
        periodType: 'days',
        timeToElapse: 58,
        reportedCases: 674,
        population: 66622705,
        totalHospitalBeds: 1380614
      };
      console.log(covid19ImpactEstimator(data));
    </script>
  </head>
  <body></body>
</html>
