<html>
  <head>
    <title>Test</title>
    <script>
      const impact = (data) => {
        const bedForCovid19 = data.totalHospitalBeds * (35 / 100);
        const { avgDailyIncomePopulation } = data.region;
        const incomePopulationPercent = avgDailyIncomePopulation;

        const incomeDays = () => {
          switch (data.periodType) {
            case 'days': {
              return data.timeToElapse;
            }
            case 'weeks': {
              return data.timeToElapse * 7;
            }
            case 'months': {
              return data.timeToElapse * 30;
            }
            default: {
              return 0;
            }
          }
        };

        const durationInDays = () => {
          switch (data.periodType) {
            case 'days': {
              return 2 ** Math.floor(data.timeToElapse / 3);
            }
            case 'weeks': {
              const days = data.timeToElapse * 7;
              return 2 ** Math.floor(days / 3);
            }
            case 'months': {
              const days = data.timeToElapse * 30;
              return 2 ** Math.floor(days / 3);
            }
            default: {
              return 0;
            }
          }
        };
        const currentlyInfected = data.reportedCases * 10;
        const infectionsByRequestedTime = currentlyInfected * durationInDays();
        const severeCasesByRequestedTime =
          infectionsByRequestedTime * (15 / 100);
        const hospitalBedsByRequestedTime = Math.trunc(
          bedForCovid19 - severeCasesByRequestedTime
        );
        const casesForICUByRequestedTime =
          infectionsByRequestedTime * (5 / 100);
        const casesForVentilatorsByRequestedTime =
          infectionsByRequestedTime * (2 / 100);
        const dollarsInFlight =
          infectionsByRequestedTime *
          incomePopulationPercent *
          data.region.avgDailyIncomeInUSD *
          incomeDays();

        return {
          currentlyInfected,
          infectionsByRequestedTime,
          severeCasesByRequestedTime,
          hospitalBedsByRequestedTime,
          casesForICUByRequestedTime,
          casesForVentilatorsByRequestedTime,
          dollarsInFlight
        };
      };

      const severeImpact = (data) => {
        const { avgDailyIncomePopulation } = data.region;
        const incomePopulationPercent = avgDailyIncomePopulation;
        const bedForCovid19 = data.totalHospitalBeds * (35 / 100);

        const incomeDays = () => {
          switch (data.periodType) {
            case 'days': {
              return data.timeToElapse;
            }
            case 'weeks': {
              return data.timeToElapse * 7;
            }
            case 'months': {
              return data.timeToElapse * 30;
            }
            default: {
              return 0;
            }
          }
        };
        console.log(incomeDays());
        const durationInDays = () => {
          switch (data.periodType) {
            case 'days': {
              return 2 ** Math.floor(data.timeToElapse / 3);
            }
            case 'weeks': {
              const days = data.timeToElapse * 7;
              return 2 ** Math.floor(days / 3);
            }
            case 'months': {
              const days = data.timeToElapse * 30;
              return 2 ** Math.floor(days / 3);
            }
            default: {
              return 0;
            }
          }
        };
        
        const currentlyInfected = data.reportedCases * 50;
        const infectionsByRequestedTime = currentlyInfected * durationInDays();
        const severeCasesByRequestedTime =
          infectionsByRequestedTime * (15 / 100);
        const hospitalBedsByRequestedTime = Math.trunc(
          bedForCovid19 - severeCasesByRequestedTime
        );
        const casesForICUByRequestedTime =
          infectionsByRequestedTime * (5 / 100);
        const casesForVentilatorsByRequestedTime =
          infectionsByRequestedTime * (2 / 100);
        const dollarsInFlight =
          infectionsByRequestedTime *
          incomePopulationPercent *
          data.region.avgDailyIncomeInUSD *
          incomeDays();

        return {
          currentlyInfected,
          infectionsByRequestedTime,
          severeCasesByRequestedTime,
          hospitalBedsByRequestedTime,
          casesForICUByRequestedTime,
          casesForVentilatorsByRequestedTime,
          dollarsInFlight
        };
      };

      const covid19ImpactEstimator = (data) => ({
        data,
        impact: impact(data),
        severeImpact: severeImpact(data)
      });

      const data = {
        region: {
          name: 'Africa',
          avgAge: 19.7,
          avgDailyIncomeInUSD: 5.0,
          avgDailyIncomePopulation: 0.71
        },
        periodType: 'days',
        timeToElapse: 58,
        reportedCases: 674,
        population: 66622705,
        totalHospitalBeds: 1380614
      };
      console.log(covid19ImpactEstimator(data));
    </script>
  </head>
  <body></body>
</html>
